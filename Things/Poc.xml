<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<Entities>
    <Things>
        <Thing description="" documentationContent="" effectiveThingPackage="DataTableThing" enabled="true" homeMashup="" identifier="" lastModifiedDate="2017-11-17T11:44:00.918+05:30" name="Poc" projectName="" published="false" tags="Applications:ThingWorx Training" thingTemplate="DataTable" valueStream="Process Value Stream">
            <Owner name="Administrator" type="User"/>
            <avatar/>
            <DesignTimePermissions>
                <Create/>
                <Read/>
                <Update/>
                <Delete/>
                <Metadata/>
            </DesignTimePermissions>
            <RunTimePermissions/>
            <VisibilityPermissions>
                <Visibility/>
            </VisibilityPermissions>
            <ConfigurationTables>
                <ConfigurationTable description="Data Thing Configuration" isMultiRow="false" name="DataThingSettings" ordinal="0">
                    <DataShape>
                        <FieldDefinitions>
                            <FieldDefinition baseType="STRING" description="Persistence Provider Name" name="persistenceProvider" ordinal="0"/>
                        </FieldDefinitions>
                    </DataShape>
                    <Rows>
                        <Row>
                            <persistenceProvider><![CDATA[ThingworxPersistenceProvider]]></persistenceProvider>
                        </Row>
                    </Rows>
                </ConfigurationTable>
                <ConfigurationTable description="Index Settings" isMultiRow="true" name="Indexes" ordinal="1">
                    <DataShape>
                        <FieldDefinitions>
                            <FieldDefinition aspect.friendlyName="Index Field Names" baseType="STRING" description="Index fields" name="fieldNames" ordinal="1"/>
                            <FieldDefinition aspect.friendlyName="Index Name" baseType="STRING" description="Index name" name="name" ordinal="0"/>
                        </FieldDefinitions>
                    </DataShape>
                    <Rows/>
                </ConfigurationTable>
                <ConfigurationTable description="Data Shape Configuration" isMultiRow="false" name="Settings" ordinal="0">
                    <DataShape>
                        <FieldDefinitions>
                            <FieldDefinition aspect.friendlyName="Data Shape" baseType="DATASHAPENAME" description="Data shape" name="dataShape" ordinal="0"/>
                        </FieldDefinitions>
                    </DataShape>
                    <Rows>
                        <Row>
                            <accumulatedDataShape>
                                <json><![CDATA[{"fieldDefinitions":{"app_version":{"name":"app_version","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":0},"Customer_Name":{"name":"Customer_Name","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":17},"Meter_Validity_Date":{"name":"Meter_Validity_Date","aspects":{"isDeleted":false},"description":"","baseType":"DATETIME","ordinal":25},"device_no":{"name":"device_no","aspects":{"isDeleted":true,"isPrimaryKey":false},"description":"","baseType":"STRING","ordinal":3},"device_type":{"name":"device_type","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":4},"sensor_5":{"name":"sensor_5","aspects":{"isDeleted":true},"description":"","baseType":"NUMBER","ordinal":13},"sensor_6":{"name":"sensor_6","aspects":{"isDeleted":true},"description":"","baseType":"NUMBER","ordinal":14},"Device_Model":{"name":"Device_Model","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":18},"Timestamp":{"name":"Timestamp","aspects":{"isDeleted":false,"isPrimaryKey":true},"description":"","baseType":"DATETIME","ordinal":27},"Meter_size_DN":{"name":"Meter_size_DN","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":23},"Meter_Installation_Date":{"name":"Meter_Installation_Date","aspects":{"isDeleted":false},"description":"","baseType":"DATETIME","ordinal":22},"sensor_3":{"name":"sensor_3","aspects":{"isDeleted":true},"description":"","baseType":"NUMBER","ordinal":11},"sensor_4":{"name":"sensor_4","aspects":{"isDeleted":true},"description":"","baseType":"NUMBER","ordinal":12},"sensor_2":{"name":"sensor_2","aspects":{"isDeleted":true},"description":"","baseType":"NUMBER","ordinal":10},"Manufacturer":{"name":"Manufacturer","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":21},"client":{"name":"client","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":1},"node_no":{"name":"node_no","aspects":{"isDeleted":true,"isPrimaryKey":false},"description":"","baseType":"STRING","ordinal":5},"timestamp":{"name":"timestamp","aspects":{"isDeleted":true,"isPrimaryKey":true},"description":"","baseType":"DATETIME","ordinal":15},"node_no3":{"name":"node_no3","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":8},"node_no2":{"name":"node_no2","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":7},"device_key":{"name":"device_key","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":2},"node_no4":{"name":"node_no4","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":9},"Electronic_Device_SN":{"name":"Electronic_Device_SN","aspects":{"isDeleted":false},"description":"","baseType":"NUMBER","ordinal":19},"node_no1":{"name":"node_no1","aspects":{"isDeleted":true},"description":"","baseType":"STRING","ordinal":6},"Electronic_Device_Type":{"name":"Electronic_Device_Type","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":20},"ConnectionID":{"name":"ConnectionID","aspects":{"isDeleted":false,"isPrimaryKey":false},"description":"","baseType":"STRING","ordinal":16},"Seal_SN":{"name":"Seal_SN","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":26},"Meter_SN":{"name":"Meter_SN","aspects":{"isDeleted":false},"description":"","baseType":"STRING","ordinal":24}}}]]></json>
                            </accumulatedDataShape>
                            <dataShape><![CDATA[Poc_DS]]></dataShape>
                        </Row>
                    </Rows>
                </ConfigurationTable>
            </ConfigurationTables>
            <ThingShape>
                <PropertyDefinitions>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="ConnectionID" ordinal="2"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Customer_Name" ordinal="3"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Device_Model" ordinal="8"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeThreshold="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="false" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="NUMBER" category="" description="" isLocalOnly="false" name="Electronic_Device_SN" ordinal="12"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="false" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Electronic_Device_Type" ordinal="11"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Manufacturer" ordinal="6"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="DATETIME" category="" description="" isLocalOnly="false" name="Meter_Installation_Date" ordinal="9"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Meter_size_DN" ordinal="7"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Meter_SN" ordinal="4"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="false" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="DATETIME" category="" description="" isLocalOnly="false" name="Meter_Validity_Date" ordinal="10"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="STRING" category="" description="" isLocalOnly="false" name="Seal_SN" ordinal="5"/>
                    <PropertyDefinition aspect.cacheTime="0.0" aspect.dataChangeType="VALUE" aspect.isLogged="true" aspect.isPersistent="false" aspect.isReadOnly="false" baseType="DATETIME" category="" description="" isLocalOnly="false" name="Timestamp" ordinal="1"/>
                </PropertyDefinitions>
                <ServiceDefinitions>
                    <ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="Entermyinfo">
                        <ResultType aspect.dataShape="Poc_DS" baseType="INFOTABLE" description="" name="result" ordinal="0"/>
                        <ParameterDefinitions>
                            <FieldDefinition baseType="JSON" description="" name="jsonData" ordinal="1"/>
                        </ParameterDefinitions>
                    </ServiceDefinition>
                    <ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="Entermyinfo1">
                        <ResultType aspect.dataShape="Poc_DS" baseType="INFOTABLE" description="" name="result" ordinal="0"/>
                        <ParameterDefinitions>
                            <FieldDefinition baseType="JSON" description="" name="jsonData" ordinal="1"/>
                        </ParameterDefinitions>
                    </ServiceDefinition>
                    <ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="Getallprop">
                        <ResultType aspect.dataShape="Poc_DS" baseType="INFOTABLE" description="" name="result" ordinal="0"/>
                        <ParameterDefinitions/>
                    </ServiceDefinition>
                    <ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="Getmeterdata">
                        <ResultType aspect.dataShape="Poc_DS" baseType="INFOTABLE" description="" name="result" ordinal="0"/>
                        <ParameterDefinitions>
                            <FieldDefinition baseType="JSON" description="" name="jsonData" ordinal="1"/>
                        </ParameterDefinitions>
                    </ServiceDefinition>
                    <ServiceDefinition aspect.isAsync="false" category="" description="" isAllowOverride="false" isLocalOnly="false" isOpen="false" isPrivate="false" name="testchart">
                        <ResultType aspect.dataShape="Gettankdatashape" baseType="INFOTABLE" description="" name="result" ordinal="0"/>
                        <ParameterDefinitions>
                            <FieldDefinition baseType="PERSISTENCEPROVIDERNAME" description="" name="dataa" ordinal="1"/>
                        </ParameterDefinitions>
                    </ServiceDefinition>
                </ServiceDefinitions>
                <EventDefinitions/>
                <ServiceMappings/>
                <ServiceImplementations>
                    <ServiceImplementation description="" handlerName="Script" name="Entermyinfo">
                        <ConfigurationTables>
                            <ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0">
                                <DataShape>
                                    <FieldDefinitions>
                                        <FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/>
                                    </FieldDefinitions>
                                </DataShape>
                                <Rows>
                                    <Row>
                                        <code><![CDATA[    var values = Things["Poc"].CreateValues();
    logger.warn("jsonData"+jsonData);
    values.ConnectionID = jsonData.ConnectionID; //STRING
    values.Customer_Name = jsonData.Customer_Name; //STRING
    values.Meter_SN = jsonData.Meter_SN;
    values.Seal_SN = jsonData.Seal_SN;
    values.Manufacturer = jsonData.Manufacturer;
    values.Device_Model = jsonData.Device_Model;
    values.Meter_size_DN = jsonData.Meter_size_DN;
    values.Meter_Installation_Date = jsonData.Meter_Installation_Date;
    values.Meter_Validity_Date = jsonData.Meter_Validity_Date;
    values.Electronic_Device_Type = jsonData.Electronic_Device_Type;
    values.Electronic_Device_SN = jsonData.Electronic_Device_SN;
    values.Timestamp = jsonData.Timestamp; //NUMBER
    values.Timestamp = values.Timestamp *1000;

    me.Timestamp = values.Timestamp;
    me.ConnectionID = values.ConnectionID;
    me.Customer_Name = values.Customer_Name;
    me.Meter_SN = values.Meter_SN;
    me.Seal_SN = values.Seal_SN;
    me.Manufacturer = values.Manufacturer;
    me.Device_Model = values.Device_Model;
  me.Meter_size_DN = values.Meter_size_DN;
    me.Meter_Installation_Date = values.Meter_Installation_Date;
    me.Meter_Validity_Date = values.Meter_Validity_Date;
    me.Electronic_Device_Type = values.Electronic_Device_Type;
    me.Electronic_Device_SN = values.Electronic_Device_SN;

    var params = {

        values : values,
    };

    var id = Things["Poc"].AddOrUpdateDataTableEntry(params);
    //var id = Things["Gettankdt"].AddDataTableEntry(params);

    // Gettankdatashape entry object
    var newEntry = new Object();
    newEntry.ConnectionID = me.ConnectionID; // STRING
    newEntry.Customer_Name = me.Customer_Name; // STRING
    newEntry.Timestamp = me.Timestamp; // DATETIME - isPrimaryKey = true

    newEntry.Meter_SN = me.Meter_SN; // STRING
    newEntry.Seal_SN = me.Seal_SN; // STRING
    newEntry.Manufacturer = me.Manufacturer; // DATETIME - isPrimaryKey = true

    newEntry.Device_Model = me.Device_Model; // STRING
    newEntry.Meter_size_DN = me.Meter_size_DN; // STRING
    newEntry.Meter_Installation_Date = me.Meter_Installation_Date; // DATETIME - isPrimaryKey = true

    newEntry.Meter_Validity_Date = me.Meter_Validity_Date; // STRING
    newEntry.Electronic_Device_Type = me.Electronic_Device_Type; // STRING
    newEntry.Electronic_Device_SN = me.Electronic_Device_SN; // DATETIME - isPrimaryKey = true


    var params1 = {
        infoTableName : "InfoTable",
        dataShapeName : "Poc_DS" 
    };  

    var result =
        Resources["InfoTableFunctions"].
        CreateInfoTableFromDataShape(params1);
    result.AddRow(newEntry); ]]></code>
                                    </Row>
                                </Rows>
                            </ConfigurationTable>
                        </ConfigurationTables>
                    </ServiceImplementation>
                    <ServiceImplementation description="" handlerName="Script" name="Entermyinfo1">
                        <ConfigurationTables>
                            <ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0">
                                <DataShape>
                                    <FieldDefinitions>
                                        <FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/>
                                    </FieldDefinitions>
                                </DataShape>
                                <Rows>
                                    <Row>
                                        <code><![CDATA[    var values = Things["Poc"].CreateValues();
    logger.warn("jsonData"+jsonData);




    values.ConnectionID = jsonData.ConnectionID; //STRING
//values.Customer_Name = jsonData.Customer_Name; //STRING

if(values.ConnectionID=="F-102")
{
logger.warn("inside f-102 code executed");
    values.Customer_Name = jsonData.Customer_Name;
//Things["F-102"].ConnectionID =values.ConnectionID ;     
    Things[values.ConnectionID].ConnectionID =values.ConnectionID ; 
    Things[values.ConnectionID].Customer_Name =values.Customer_Name ; 
}

if(values.ConnectionID=="F-101")
{
 values.Customer_Name = jsonData.Customer_Name;
//Things["F-102"].ConnectionID =values.ConnectionID ;     
    Things[values.ConnectionID].ConnectionID =values.ConnectionID ; 
    Things[values.ConnectionID].Customer_Name =values.Customer_Name ; 
}




    //values.Customer_Name = jsonData.Customer_Name; //STRING
    values.Meter_SN = jsonData.Meter_SN;
    values.Seal_SN = jsonData.Seal_SN;
    values.Manufacturer = jsonData.Manufacturer;
    values.Device_Model = jsonData.Device_Model;
    values.Meter_size_DN = jsonData.Meter_size_DN;
    values.Meter_Installation_Date = jsonData.Meter_Installation_Date;
    values.Meter_Validity_Date = jsonData.Meter_Validity_Date;
    values.Electronic_Device_Type = jsonData.Electronic_Device_Type;
    values.Electronic_Device_SN = jsonData.Electronic_Device_SN;
    values.Timestamp = jsonData.Timestamp; //NUMBER
    values.Timestamp = values.Timestamp *1000;

    me.Timestamp = values.Timestamp;
    me.ConnectionID = values.ConnectionID;
    me.Customer_Name = values.Customer_Name;
    me.Meter_SN = values.Meter_SN;
    me.Seal_SN = values.Seal_SN;
    me.Manufacturer = values.Manufacturer;
    me.Device_Model = values.Device_Model;
  me.Meter_size_DN = values.Meter_size_DN;
    me.Meter_Installation_Date = values.Meter_Installation_Date;
    me.Meter_Validity_Date = values.Meter_Validity_Date;
    me.Electronic_Device_Type = values.Electronic_Device_Type;
    me.Electronic_Device_SN = values.Electronic_Device_SN;

    var params = {

        values : values,
    };

    var id = Things["Poc"].AddOrUpdateDataTableEntry(params);
    //var id = Things["Gettankdt"].AddDataTableEntry(params);

    // Gettankdatashape entry object
    var newEntry = new Object();
    newEntry.ConnectionID = me.ConnectionID; // STRING
    newEntry.Customer_Name = me.Customer_Name; // STRING
    newEntry.Timestamp = me.Timestamp; // DATETIME - isPrimaryKey = true

    newEntry.Meter_SN = me.Meter_SN; // STRING
    newEntry.Seal_SN = me.Seal_SN; // STRING
    newEntry.Manufacturer = me.Manufacturer; // DATETIME - isPrimaryKey = true

    newEntry.Device_Model = me.Device_Model; // STRING
    newEntry.Meter_size_DN = me.Meter_size_DN; // STRING
    newEntry.Meter_Installation_Date = me.Meter_Installation_Date; // DATETIME - isPrimaryKey = true

    newEntry.Meter_Validity_Date = me.Meter_Validity_Date; // STRING
    newEntry.Electronic_Device_Type = me.Electronic_Device_Type; // STRING
    newEntry.Electronic_Device_SN = me.Electronic_Device_SN; // DATETIME - isPrimaryKey = true


    var params1 = {
        infoTableName : "InfoTable",
        dataShapeName : "Poc_DS" 
    };  

    var result =
        Resources["InfoTableFunctions"].
        CreateInfoTableFromDataShape(params1);
    result.AddRow(newEntry); ]]></code>
                                    </Row>
                                </Rows>
                            </ConfigurationTable>
                        </ConfigurationTables>
                    </ServiceImplementation>
                    <ServiceImplementation description="" handlerName="Script" name="Getallprop">
                        <ConfigurationTables>
                            <ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0">
                                <DataShape>
                                    <FieldDefinitions>
                                        <FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/>
                                    </FieldDefinitions>
                                </DataShape>
                                <Rows>
                                    <Row>
                                        <code><![CDATA[
var params = {
	oldestFirst: undefined /* BOOLEAN */,
	maxItems: undefined /* NUMBER */,
	endDate: undefined /* DATETIME */,
	query: undefined /* QUERY */,
	startDate: undefined /* DATETIME */
};

// result: INFOTABLE
var result = Things["Poc"].QueryPropertyHistory(params);


]]></code>
                                    </Row>
                                </Rows>
                            </ConfigurationTable>
                        </ConfigurationTables>
                    </ServiceImplementation>
                    <ServiceImplementation description="" handlerName="Script" name="Getmeterdata">
                        <ConfigurationTables>
                            <ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0">
                                <DataShape>
                                    <FieldDefinitions>
                                        <FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/>
                                    </FieldDefinitions>
                                </DataShape>
                                <Rows>
                                    <Row>
                                        <code><![CDATA[    var values = Things["Poc"].CreateValues();
    logger.warn("jsonData"+jsonData);
    values.ConnectionID = jsonData.ConnectionID; //STRING
    values.Customer_Name = jsonData.Customer_Name; //STRING
    values.Meter_SN = jsonData.Meter_SN;
    values.Seal_SN = jsonData.Seal_SN;
    values.Manufacturer = jsonData.Manufacturer;
    values.Device_Model = jsonData.Device_Model;
    values.Meter_size_DN = jsonData.Meter_size_DN;
    values.Meter_Installation_Date = jsonData.Meter_Installation_Date;
    values.Meter_Validity_Date = jsonData.Meter_Validity_Date;
    values.Electronic_Device_Type = jsonData.Electronic_Device_Type;
    values.Electronic_Device_SN = jsonData.Electronic_Device_SN;
    values.Timestamp = jsonData.Timestamp; //NUMBER
    values.Timestamp = values.Timestamp *1000;

    me.Timestamp = values.Timestamp;
    me.ConnectionID = values.ConnectionID;
    me.Customer_Name = values.Customer_Name;
    me.Meter_SN = values.Meter_SN;
    me.Seal_SN = values.Seal_SN;
    me.Manufacturer = values.Manufacturer;
    me.Device_Model = values.Device_Model;
  me.Meter_size_DN = values.Meter_size_DN;
    me.Meter_Installation_Date = values.Meter_Installation_Date;
    me.Meter_Validity_Date = values.Meter_Validity_Date;
    me.Electronic_Device_Type = values.Electronic_Device_Type;
    me.Electronic_Device_SN = values.Electronic_Device_SN;

    var params = {

        values : values,
    };

    var id = Things["Poc"].AddOrUpdateDataTableEntry(params);
    //var id = Things["Gettankdt"].AddDataTableEntry(params);

    // Gettankdatashape entry object
    var newEntry = new Object();
    newEntry.ConnectionID = me.ConnectionID; // STRING
    newEntry.Customer_Name = me.Customer_Name; // STRING
    newEntry.Timestamp = me.Timestamp; // DATETIME - isPrimaryKey = true

    newEntry.Meter_SN = me.Meter_SN; // STRING
    newEntry.Seal_SN = me.Seal_SN; // STRING
    newEntry.Manufacturer = me.Manufacturer; // DATETIME - isPrimaryKey = true

    newEntry.Device_Model = me.Device_Model; // STRING
    newEntry.Meter_size_DN = me.Meter_size_DN; // STRING
    newEntry.Meter_Installation_Date = me.Meter_Installation_Date; // DATETIME - isPrimaryKey = true

    newEntry.Meter_Validity_Date = me.Meter_Validity_Date; // STRING
    newEntry.Electronic_Device_Type = me.Electronic_Device_Type; // STRING
    newEntry.Electronic_Device_SN = me.Electronic_Device_SN; // DATETIME - isPrimaryKey = true


    var params1 = {
        infoTableName : "InfoTable",
        dataShapeName : "Poc_DS" 
    };  

    var result =
        Resources["InfoTableFunctions"].
        CreateInfoTableFromDataShape(params1);
    result.AddRow(newEntry); ]]></code>
                                    </Row>
                                </Rows>
                            </ConfigurationTable>
                        </ConfigurationTables>
                    </ServiceImplementation>
                    <ServiceImplementation description="" handlerName="Script" name="testchart">
                        <ConfigurationTables>
                            <ConfigurationTable description="Script" isMultiRow="false" name="Script" ordinal="0">
                                <DataShape>
                                    <FieldDefinitions>
                                        <FieldDefinition baseType="STRING" description="code" name="code" ordinal="0"/>
                                    </FieldDefinitions>
                                </DataShape>
                                <Rows>
                                    <Row>
                                        <code><![CDATA[//var values = Things["Gettankdt"].CreateValues();
//values.device_key = jsonData.device_key; //STRING
//logger.warn("device key"+values.device_key);
//values.app_version = jsonData.app_version; //STRING
//values.sensor_2 = jsonData.nodes[0].sensor_2; //STRING
//values.sensor_3 = jsonData.nodes[1].sensor_2;
//values.sensor_4 = jsonData.nodes[2].sensor_2;
//values.sensor_5 = jsonData.nodes[3].sensor_2;
//values.sensor_6 = jsonData.nodes[4].sensor_2;
//values.client = jsonData.client; //STRING
//values.node_no = jsonData.nodes[0].node_no;//STRING [Primary Key]
//values.node_no1 = jsonData.nodes[1].node_no; 
//values.node_no2 = jsonData.nodes[2].node_no; 
//values.node_no3 = jsonData.nodes[3].node_no; 
//values.node_no4 = jsonData.nodes[4].node_no; 
//values.device_no = jsonData.device_no; //STRING
//values.device_type = jsonData.device_type; //STRING
//values.timestamp = jsonData.timestamp; //NUMBER
//values.timestamp = values.timestamp *1000;
/*logger.warn("lenth"+jsonData.nodes);
for(var i=0;i<=jsonData.nodes.length;i++){
     logger.warn("abc"+i+"_"+jsonData.nodes[0].sensor_2);
    };*/
/*var obj=jsonData.nodes;
for (var key in obj) {
  //if (obj.hasOwnProperty(key)) {
    var val = obj[key];
    //console.log(val);
       logger.warn("val "+val);*/
 // }
//}
//logger.warn("timestamp value is"+values.timestamp);
//var nodes = jsonData.nodes[0];

//var node_no=[],sensor_2=[];
//logger.warn("sensor2 value "+nodes);
//for(var i=0;i<=nodes.length;i++) //in nodes)
//{
    //logger.warn("Entered into the loop"); 
  //    var node_no = nodes[i].node_no;
    //var sensor_2 = nodes[i].sensor_2;
//me.sensor_2 = values.sensor_2;
//logger.warn("sensor2 value is"+sensor_2 + node_no);    
  // values = sensor_2;
//}
//values.sensor_2 = sensor_2[0];
//values.node_no = node_no[0];

//values.node_no = jsonData.nodes.node_no;
//logger.warn("sensor2 value is"+values.node_no);  
//values.sensor_2 = "6523"//jsonData.nodes.sensor_2;
//me.sensor_2 = jsonData.nodes.sensor_2;
//logger.warn("sensor2 value is"+values.sensor_2);
/*me.sensor_2=values.sensor_2;
me.timestamp = values.timestamp;
me.sensor_2 = values.sensor_2;
me.sensor_3 = values.sensor_3;
me.sensor_4 = values.sensor_4;
me.sensor_5 = values.sensor_5;
me.sensor_6 = values.sensor_6;
me.client = values.client;
me.app_version = values.app_version;
me.device_key = values.device_key;
me.node_no = values.node_no;
me.node_no1 = values.node_no1;
me.node_no2 = values.node_no2;
me.node_no3 = values.node_no3;
me.node_no4 = values.node_no4;
*/


/*var params = {

	values : values,
};

var id = Things["Gettankdt"].AddOrUpdateDataTableEntry(params);
//var id = Things["Gettankdt"].AddDataTableEntry(params);
*/
// Gettankdatashape entry object
var newEntry = new Object();
newEntry.node_no3 = me.node_no3; // STRING
newEntry.node_no2 = me.node_no2; // STRING
newEntry.device_key = me.device_key; // STRING
logger.warn("new entry device key"+newEntry.device_key);
newEntry.node_no4 = me.node_no4; // STRING
newEntry.app_version = me.app_version; // STRING
newEntry.node_no1 = me.node_no1; // STRING
newEntry.device_no = me.device_no; // STRING
newEntry.device_type = me.device_type; // STRING
newEntry.sensor_5 = me.sensor_5; // STRING
newEntry.sensor_6 = me.sensor_6; // STRING
newEntry.sensor_3 = me.sensor_3; // STRING
newEntry.sensor_4 = me.sensor_4; // STRING
newEntry.sensor_2 = me.sensor_2; // STRING
newEntry.client = me.client; // STRING
newEntry.node_no = me.node_no; // STRING
newEntry.timestamp = me.timestamp; // DATETIME - isPrimaryKey = true
newEntry.device_no = me.device_no;
newEntry.device_type = me.device_type;

var params1 = {
    infoTableName : "InfoTable",
    dataShapeName : "Gettankdatashape" 
};  

var result =
    Resources["InfoTableFunctions"].
    CreateInfoTableFromDataShape(params1);
result.AddRow(newEntry); 



]]></code>
                                    </Row>
                                </Rows>
                            </ConfigurationTable>
                        </ConfigurationTables>
                    </ServiceImplementation>
                </ServiceImplementations>
                <Subscriptions/>
            </ThingShape>
            <PropertyBindings/>
            <RemotePropertyBindings/>
            <RemoteServiceBindings/>
            <RemoteEventBindings/>
            <AlertConfigurations>
                <AlertDefinitions name="ConnectionID"/>
                <AlertDefinitions name="Customer_Name"/>
                <AlertDefinitions name="Device_Model"/>
                <AlertDefinitions name="Electronic_Device_SN"/>
                <AlertDefinitions name="Electronic_Device_Type"/>
                <AlertDefinitions name="Manufacturer"/>
                <AlertDefinitions name="Meter_Installation_Date"/>
                <AlertDefinitions name="Meter_size_DN"/>
                <AlertDefinitions name="Meter_SN"/>
                <AlertDefinitions name="Meter_Validity_Date"/>
                <AlertDefinitions name="Seal_SN"/>
                <AlertDefinitions name="Timestamp"/>
            </AlertConfigurations>
            <ImplementedShapes/>
            <ThingProperties/>
            <ConfigurationChanges>
                <ConfigurationChange changeAction="CREATE" changeReason="header : name : updated, tags : updated&#10;" timestamp="2017-10-30T10:56:14.190+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="configuration : dataShape : updated&#10;" timestamp="2017-10-30T10:56:33.038+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;configuration : dataShape : updated&#10;" timestamp="2017-10-30T10:57:10.416+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T10:57:44.695+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : sensor_2 : removed, timestamp : removed, sensor_3 : removed, sensor_4 : removed, sensor_5 : removed, sensor_6 : removed, device_key : removed, app_version : removed, client : removed, node_no : removed, node_no1 : removed, node_no2 : removed, node_no3 : removed, node_no4 : removed, device_no : removed, device_type : removed, Timestamp : Added, ConnectionID : Added, Updated, Customer_Name : Added, Updated&#10;services : Entermyinfo : Input parameter timestamp Updated, Inputs updated, Input parameter" timestamp="2017-10-30T11:08:03.086+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:08:04.127+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Getallprop : Code Updated&#10;" timestamp="2017-10-30T11:08:59.504+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Timestamp : Updated, ConnectionID : Updated, Customer_Name : Updated&#10;" timestamp="2017-10-30T11:10:58.819+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:10:59.545+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:11:45.793+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Timestamp : Updated, ConnectionID : Updated, Customer_Name : Updated&#10;" timestamp="2017-10-30T11:12:37.707+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:12:38.440+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Input parameter jsonData Updated, Inputs updated&#10;" timestamp="2017-10-30T11:13:20.317+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:13:20.965+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Input parameter jsonData Added, Inputs updated&#10;" timestamp="2017-10-30T11:13:59.376+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Meter_SN : Added, Seal_SN : Added, Manufacturer : Added&#10;services : Entermyinfo : Output Updated, Code Updated&#10;" timestamp="2017-10-30T11:27:27.549+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:27:28.197+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:30:47.484+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Meter_SN : Updated&#10;" timestamp="2017-10-30T11:31:28.976+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Device_Model : Added, Meter_size_DN : Added, Meter_Installation_Date : Added, Updated, Meter_Validity_Date : Added, Updated, Electronic_Device_Type : Added, Updated, Electronic_Device_SN : Added&#10;" timestamp="2017-10-30T11:36:51.244+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T11:41:13.850+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:41:14.618+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T11:45:37.410+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:46:20.169+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:46:21.820+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T11:50:14.585+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:50:15.375+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Device_Model : removed, Meter_size_DN : removed, Meter_Installation_Date : removed, Meter_Validity_Date : removed, Electronic_Device_Type : removed, Electronic_Device_SN : removed&#10;" timestamp="2017-10-30T11:54:30.480+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T11:55:08.950+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:55:09.670+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:55:35.905+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:55:36.618+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:55:37.148+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:55:37.707+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="configuration : dataShape : updated&#10;" timestamp="2017-10-30T11:56:38.416+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:56:41.193+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:57:58.869+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:57:59.542+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="configuration : dataShape : updated&#10;" timestamp="2017-10-30T11:59:42.056+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:59:42.981+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T11:59:56.473+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T12:01:49.208+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:01:50.272+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T12:04:01.606+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Meter_size_DN : Added, Updated, Device_Model : Added, Updated&#10;configuration : dataShape : updated&#10;" timestamp="2017-10-30T12:06:23.418+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated&#10;" timestamp="2017-10-30T12:07:21.732+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:07:22.430+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:07:22.742+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:07:23.171+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Output Updated&#10;" timestamp="2017-10-30T12:12:05.409+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:12:06.011+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="configuration : dataShape : updated&#10;" timestamp="2017-10-30T12:15:25.299+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="configuration : dataShape : updated&#10;" timestamp="2017-10-30T12:17:39.612+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="properties : Meter_Installation_Date : Added, Meter_Validity_Date : Added, Electronic_Device_Type : Added, Electronic_Device_SN : Added&#10;" timestamp="2017-10-30T12:18:46.328+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:18:47.402+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:18:47.986+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Code Updated, Output Updated&#10;" timestamp="2017-10-30T12:19:49.159+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:19:49.871+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:24:58.349+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="configuration : dataShape : updated&#10;" timestamp="2017-10-30T12:26:49.146+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo : Output Updated&#10;" timestamp="2017-10-30T12:27:02.641+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T12:27:03.296+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T15:17:52.539+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T15:56:40.598+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T15:59:43.387+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Getallprop : Output Updated&#10;" timestamp="2017-10-30T15:59:58.668+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services :  : Code Updated&#10;" timestamp="2017-10-30T20:01:48.807+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Service Added&#10;" timestamp="2017-10-30T20:52:59.329+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-10-30T22:34:36.390+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-10-30T22:42:39.062+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-10-30T22:55:00.753+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services :  : Code Updated&#10;" timestamp="2017-11-01T16:20:51.695+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-01T20:02:41.699+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-01T20:02:43.425+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-02T16:12:02.747+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T16:34:39.056+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T16:36:43.263+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T16:43:21.917+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T16:55:42.192+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T16:59:02.432+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T17:00:06.760+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-02T17:09:02.678+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-02T17:09:38.832+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Getmeterdata : Service Added, Output Updated, Code Updated&#10;" timestamp="2017-11-09T21:59:21.557+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-10T17:18:24.195+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-10T22:38:18.598+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-13T16:31:20.461+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-13T16:31:25.457+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="services : Entermyinfo1 : Code Updated&#10;" timestamp="2017-11-14T22:33:09.275+05:30" user="Administrator"/>
                <ConfigurationChange changeAction="MODIFY" changeReason="" timestamp="2017-11-17T11:44:00.845+05:30" user="Administrator"/>
            </ConfigurationChanges>
        </Thing>
    </Things>
</Entities>
